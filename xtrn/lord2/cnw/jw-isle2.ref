; Script file JW-ISLE2.REF, indexed by REFINDEX v0.01 on Sun Mar 18 22:19:27 2001

@DECLARE start 000001542
@DECLARE beach 000001711
@DECLARE mandrakebard 000004218
@DECLARE pickdrake 000004357
@DECLARE pickbane 000004830
@DECLARE mandrakesign 000005403
@DECLARE forebode 000005539
@DECLARE pylon1 000005750
@DECLARE pylon2 000006140
@DECLARE chasmhealer 000006544
@DECLARE chasmbard 000006742
@DECLARE farmgirl 000006906
@DECLARE farmer 000007090
@DECLARE nocash 000008293
@DECLARE eastentrance 000008410
@DECLARE hasorb 000008731
@DECLARE caveebard 000009613
@DECLARE heron 000009756
@DECLARE westentrance 000010929
@DECLARE cavewarden 000011268
@DECLARE cavewbard 000011429
@DECLARE darkbard 000011618
@DECLARE darknbard 000023781
@DECLARE darksbard 000024498
@DECLARE mirrortable 000025190
@DECLARE westtp 000025899
@DECLARE easttp 000026098
@DECLARE med2tp 000026294
@DECLARE med1tp 000026446
@DECLARE skull 000026600
@DECLARE weststone 000027222
@DECLARE eaststone 000027360
@DECLARE northstone 000027499
@DECLARE southstone 000027639
@DECLARE menhirman 000027776
@DECLARE menman 000027831
@DECLARE healerhut 000029720
@DECLARE fishbard 000032216
@DECLARE fish 000032350
@DECLARE swamprat 000032484
@DECLARE swampprize 000035937
@DECLARE talkedshiv 000037176
@DECLARE safebridge 000037526
@DECLARE swampfever 000037684
@DECLARE witch 000037725
@DECLARE killkeypress 000038591
@NOCHECK
; End of .REF index

; Ref file for Jim Wilson's, Lord 2 IGM ver.  1.01, Mimsic Isle.


@#Start


                        ;Events       ....

;--------------------------------------------------------------------

                        ;Mandrake

@#Beach
@busy
@do moveback
@pauseoff
@show
[?7h[40m[2J[8C[0;1;31mммммлллллллллллллллллллллл[45mВВВВБББААА  [40m[s
[u[45m                [0;30;45mАААБББББлллллл[2;1H[5C[1;31;40mмлллллл[s
[uллллллллллллллллллллллллллл[45mВВВББАА                     [40m[s
[u[0;30;45mААБББВВлл[3;1H[4C[1;31;40mллллллллллллллллллллллллллллллллл[s
[uллллллл[45mВВВВББАА                 [0;30;45mААБББВл[4;1H[3C[40m[s
[u[1;31;40mолллллллллллллллллллллллллллллллллллллллллллл[45mВВББАА [40m[s
[u[45m                [0;30;45mААББВ[5;1H[3C[1;31;40mоллллллллллллллл[s
[uллллллллллллллллллллллллллллллл[45mВВВББААА              [40m[s
[u[0;30;45mААББ[6;1H[3C[1;31;40mоллллллллллллллллллллллллллллллллллллл[s
[uлллллллллллл[45mВВББААА              [0;30;45mАА[7;1H[3C[40m[s
[u[1;31;40mллллллллллллллллллллллллллллллллллллллллллллллллллл[45mВ[40m[s
[u[45mВББААА              [0;30;45mА[8;1H[3C[1;31;40mлллллллллллллллл[s
[uлмллплллллллллллллллллллллллллллллллллл[45mВВББАА            [40m
[9;1H   лллллллллллллллмпмммпллллппплллллллллллллллллллллллллллллл[s
[u[45mВВББАА        [0;30;45mо[10;1H[3C[1;31;40mллллллллллллмплмлпппп[s
[u пммллпммпллллллллллллллллллллллллллллллл[45mВВББАА    [0;30;45mл[40m
[11;1H   [1;31mллллллллллпмплопмплл  лллллпмлпллллллллллллллллллллллллллл[s
[uлллллл[45mВВББАА[0;35mлл[30;45mл[12;1H[3C[1;31;40mлллллллллллпмм п[s
[uммпн оллллллллллллллллллллллллллллллллллллллллллллл[45mВБА [0;35mл[s
[u[30;45mо[13;1H[3C[1;31;40mллллллллллллллн ллмн олллллллллллллллллллл[s
[uллллллллллллллллллллллллллл[45mВБА[0;30;45mо[14;1H[3C[1;31;40mппппп[s
[uпппллллллн оллн  ллллллллллллллллллллллллллллллллллллллллл[45mлллл[40m[s
[u[45mлллВБА[15;1H[3C[33;40mллллллллммм[31mпплн оллн  олллллллллллллл[s
[uллллллллллллл[45mллллллллллллллллллллллБ[16;1H[3C[33;40mлллллллллллл[s
[uлм  [31mолл    ллллллллллллллллллллллллллллллллллллллллллллллл[s
[u[45mллВ[17;1H[15C[33;40mпп   [31mп[7Cппппппппппппплллллллллллллллл[s
[u[45mлллллллллллллллллл[18;1H[42C[0;34mм   [1;31mппп[44mпппппп[40m[s
[u[44mпппппппппппппппппппп[19;1H[32C[0;34mм ммпплллпплммммлммммлллпппл[s
[uллллллпппппппscњ[20;1H[1;37;40m

                            `!Beautifull Beach!`l`x`l`x
@pauseon
@key nodisplay
@if `p02 < `p03 then do
@begin
        `p02 + 5
@end
@drawmap
@update
;--------------------------------------------------------------------
@#MandrakeBard
@do saybar
`$You must learn what `0plants`$ to pick.
;--------------------------------------------------------------------
@#PickDrake
@busy
@dataload jw-isle3.mil &playernum `p24
@do `t70 is `p24
@if bitcheck `t70 1 1 then do
        @bitset `t70 6 1
        @do `p24 is `t70
        @datasave jw-isle3.mil &playernum `p24
        @do saybar
        `0You pick some `%Mandrake. `0It shrieks as the roots pull loose!
        @closescript
end
@do saybar
You must learn plantlore lest you pluck the wrong weeds!

;--------------------------------------------------------------------
@#PickBane
@busy
@dataload jw-isle3.mil &playernum `p24
@do `t70 is `p24

@if bitcheck `t70 1 1 then do
@begin
        @datanewday jw-isle1.mil
        @dataload jw-isle1.mil &playernum `p24
        @do `t70 is `p24
        @bitset `t70 7 1
        @do `p24 is `t70
        @datasave jw-isle1.mil &playernum `p24

        @do saybar
        `$You pick some `%Wolf's Bane.`$ It may come in handy!
        @closescript
@end

@do saybar
`$You pick some `#smelly`$ plants, what are they?

;---------------------------------------------------------

@#MandrakeSign
@do moveback
@do saybar
`%Mandrake grows here, be aware!

;---------------------------------------------------------

@#ForeBode

@do saybar
`%You feel an uncanny sense of dread...you want to `$RUN!!

;-----------------------------------------------------------
                        ; Chasm
                        ; TP
@#Pylon1
@do saybar
Interesting, a tightrope!  Dare I cross it?
@do moveback
@dataload jw-isleg.mil &playernum `p22
@do `t70 is `p22

@if bitcheck `t70 4 1 then do
@begin
        @do y is 7
        @do x is 48
        @update
        @do saybar
`0You carefully inch across using your `%pole `0for balance.
@end
;-----------------------------------------------------------

@#Pylon2
@do saybar
`0Interesting, a `%tightrope!  `0Dare I cross it?
@do moveback
@dataload jw-isleg.mil &playernum `p22
@do `t70 is `p22

@if bitcheck `t70 4 1 then do
@begin
        @do y is 11
        @do x is 48
        @update
        @do saybar
`0You carefully inch across using your `%pole `0for balance.
@end

;-----------------------------------------------------------

@#ChasmHealer
@do moveback
@busy
@show
`r0`c
                        `%Chasm Field Hospital
`/
`/
@run hospital in jw-isle.ref
;-----------------------------------------------------------

@#ChasmBard
@do saybar
`0Try buying the `%pole`0 in the giftshop. It will help you cross the chasm!
;-----------------------------------------------------------
@#Farmgirl
@busy
@do moveback
@do saybar
`$I hear that `#Krista `$is looking for hired help, north and west of here.

;-----------------------------------------------------------
@#Farmer
@busy
@do moveback
@show
`r0`c
        `0You find a weathered old farmer standing in his field.

        `2You see garlic, `%Wolf's Bane `2 and cloves growing profusely

        `2You wonder if you should by some?  (You have `$$&money`2 with you.)


@if &money < 1000 then do
@begin
        @show


        That's not enough jack, Jack!

        @do goto nocash
@end
@DO `V01 IS 1
@do write
`x`x`x`x`x`x`x`x
        @choice
Leave
`$Buy some herbs for $980
@if response is 1 then do
@begin
        @show
        `c
                 `0You'd rather not buy any, you have enough.
@end

@if response is 2 then do
@begin
        @do money - 1000
        @datanewday jw-isle1.mil
        @dataload jw-isle1.mil &playernum `p24
        @do `t70 is `p24
        @bitset `t70 7 1
        @do `p24 is `t70
        @datasave jw-isle1.mil &playernum `p24
        @dataload jw-isleL.mil &playernum `p24
        @do `p24 + 20
        @datasave jw-isleL.mil &playernum `p24

        @show
        `c
    `$You now have some cooking spices and some `%Wolf's Bane.


    `$You pack it all away carefully, including your change of 20 rat pelts.


@end
@label nocash
@key nodisplay
@drawmap
@update
@closescript

;-----------------------------------------------
@#EastEntrance
                        ; EastCave
                        ; TP
@busy
@do moveback
@do `p20 is 1
@routine hasorb

@if `p20 is 0 then do
@begin
        @closescript
@end

@do map is 1316
@do x is 75
@do y is 12
@loadmap &map
@drawmap
@update

;-----------------------------------------------
@#HasOrb

@if `i17 > 0 then do
@begin
        @do quebar
`0You hold your `#glowworm `0high and march forward into the caves.
        @closescript
@end

@dataload jw-isleg.mil &playernum `p24
@do `t70 is `p24

@if bitcheck `t70 3 1 then do
@begin
        @do quebar
`0You hold your `$Shining Orb `0high and march forward into the caves.
        @closescript
@end

@if bitcheck `t70 1 1 then do
@begin
        @do quebar
`0You hold your `$Sunstone `0high and march forward into the caves.
        @closescript
@end

@if bitcheck `t70 0 1 then do
@begin
        @do quebar
`0You use your `$Campfire Starter `0to as a torch and go forward into the caves.
        @closescript
@end

@do saybar
`2With no way to create a light you back away from the caves.
@do `p20 is 0
@closescript

;-----------------------------------------------------------
@#CaveEBard
@do saybar
`$Some people wear a helmet when going into this cave.

;-----------------------------------------------------------

@#Heron
@do moveback
@busy
@dataload jw-isle3.mil &playernum `p24
@do `t70 is `p24

@show
`r0`c
       `2You see the Greater Mimsic Herons fishing along the shore.

       One of them has dropped a salmon at its feet.
       Another stalks amongst the reeds.

@do write
`x`x`x`x`x`x
@do `v01 is 1
        @choice
`$Leave ?
`%Take the salmon the Heron dropped ?
>`i29 0 `2Throw the hunting Heron a salmon ?
@if response is 1 then do
@begin
        @show
        `r0`c
        `$You leave the beach to the Herons.
@end

@If response is 2 then do
@begin
        @if `i29 < 30 then do
        @begin
                @do `i29 + 1
        @end
        @bitset `t70 2 0
        @show
        `r0`c
        `%You snatch the `#salmon `%and leave the beach. Yipee, a salmon!
@end

@If response is 3 then do
@begin
        @do `i29 - 1
        @bitset `t70 2 1
        @show
        `r0`c
        `$You throw the wading heron a fat `#salmon. `$It looks happy!

@end

@do `p24 is `t70
@datasave jw-isle3.mil &playernum `p24

@key nodisplay
@drawmap
@update

;-----------------------------------------------------------

@#WestEntrance
                        ; West Cave
                        ; TP
@busy
@do moveback
@do `p20 is 1

@routine hasorb

@if `p20 is 0 then do
@begin
        @closescript
@end

@do map is 1316
@do x is 4
@do y is 11
@loadmap &map
@drawmap
@update

;-----------------------------------------------------------
@#Cavewarden

@do moveback
@do saybar
`$Most people wear a helmet when going into the caves.

;-----------------------------------------------------------
@#CaveWBard
@do moveback
@do saybar
`%Medusa lives north of here.  She's a stoner!

;-----------------------------------------------------------
                        ; DeepWoods

@#DarkBard
@busy
@do moveback

@datanewday jw-isle4.mil
@dataload jw-isle4.mil &playernum `p20
@do `t70 is `p20
@if bitcheck `t70 1 0 then do
@begin
        @bitset `t70 1 1
        @do `p20 is `t70
        @datasave jw-isle4.mil &playernum `p20
        @pauseoff
        @show
[?7h[40m[2J[4C[0;33mмлВБВ АБл мл  лммм[17C[34mАл  [1;5;44mАА[40m[s
[u[3C[0;34mл[20C[1;5mў[2;1H [0;33mААБ мААВБА[1;34;43mАА[40m[s
[u[0;33mл л[1;34;43mАА[0;33mлллммппппп п[10C[34mпл [1;5;44mА[40m[s
[u[0;34mА[1;44mА[3C[0;34mл[20C[1mм[5C[0;5;34mп[3;1H    [0;33mп[s
[uпБВлллмл[1;5;34;43mА[0;1;34;43mАА[0;33mлпп[14Cм[6C[34mА[s
[u[1;5;44mА[1C[0;1;34;44mАВ[5mА[0;1;34;44mА[1C[0;34mмп[7Cм  [s
[u[1;5mў[6C[0;34mмп [1;5mмл[0;1;34mм  [0;5;34mп м[4;1H[8C[0;33m[s
[uпАллм[1;34;43mАА[0;33mл[16CллВБ[5C[1;34;44mВ[2C[5mБ[40m[s
[u[0;1;34;44mБВ[5mА[1C[0;34mл[7Cм[6C[1mм  [0;34mп[1mммпп[5mм [s
[u[0;5;34mм м[5;1H[10C[0;33mБл[1;34;43mАА[0;33mл[6C[37mп м[s
[u[1;30mм[47mм[40mп   [0;33mмллВБАА  [34mмл[1;44mБ[5mА[40m[s
[u[0;34mА  [1;44mБАА[1C[0;34mл[8Cмлл [1mп  мп[0;5;34mм [0;1;34mп[s
[u[5mп[0;1;34mмп[0;5;34mмп[6;1H    [0;33mммБАп  В[43m [40m[s
[u[43m[1;5;34mА[2C[0;33mпллммм    ммллл[1;34;43mА[0;33mллВБАА [s
[u[34mл[1;44mБ[0;34mА   [1;44mАБВ[5mА[0;34mмп[6Cп ммлп    лп[1mм[s
[uп[5mмпл[0;1;34mп[0;5;34mм[7;1H [0;33mАБВВБА   БВ[1;34;43mА[40m[s
[u[43m[5mА[2C[0;33mллпп[1;34;43mАА[0;33mллл[43m  [1;34mА[40m[s
[u[43m[5mА[0;1;34;43mАА[0;33mлллВВБАА[34mм[1;44mБ[5mА[1C[40m[s
[u[0;34mАА [1;44mБВА[0;34mл[10Cлмл  ммлл [1mмпм  пм [0;34mпм[8;1H[s
[u  [33mББАп    БВл[1;34;43mА[0;33mл  лл[1;34;43mАА [0;33mл[s
[u[1;5;34;43mА [0;1;34;43mАА[5mА[0;1;34;43mА[0;33mлллВВВБАА[34mл[s
[u[1;44mАВ[1C[0;34mА  А[1;44mБ[5mА[0;34mл[10C[1;5mў[0;34mмп[1m[s
[uм[5mп[0;34mмл[1mмплмп[0;5;34mм[0;34mп[1mмлмл [0;34mлп[9;1H[s
[u[10C[33mВл[43m [1;34mАА[2C[0;33mолл[1;34;43mАА[0;33mлВВл[s
[u[1;34;43mА[0;33mлллВВББАА  [34mл[1;44mВ[5mА[1C[0;34mАА [s
[u[1;5;44mА[0;1;34;44mВ[2C[0;34mлм[9Cмп[1mмм[5mл[0;34mмп[1mпмлп[s
[uм[0;5;34mп[0;34mм[1mп[0;5;34mм[0;34mм[1mп[5mм[0;5;34mў[10;1H[s
[u[9C[0;33mБВл[43m [1;5;34mА[0;1;34;43mА[0;33mл   пл[s
[u[1;34;43mА[5mА[0;33mллВВВВВВБАА    [1;34;44mВ[0;34mАБАА [s
[u[1;44mБВ[0;34mАБ  пм[8C[1;5mм[0;1;34mп[5mм[0;34mммп[1mмл[s
[u[5;37mў[0;1;34mппмл[0;5;34mпл[0;34mп[1mм[5mлп[0;5;34mм[11;1H[s
[u[6C[0;33mм АБл[1;34;43mААА[0;33mл[1;34;43mА[0;33mл м  л[s
[u[1;34;43mА[5mА[0;1;34;43mА[0;33mллппмБА[7C[1;34;44mБ[0;34mА   [s
[u[1;5;44mА [0;34mАВ   лл[5Cпл [1mл[0;34mллппм[1;37mмл[34mмпмлл[s
[u[5mм м[0;5;34mп[0;34mмп[12;1H[7C[33mппБВл[1;34;43mААА[40m[s
[u[0;33mппп   мл[1;34;43mА[5mА[0;1;34;43mА[0;33mлВБАБ[7C[s
[u[1;34;44mБ[0;34mп   [1;5;44mА[0;1;34;44mА [1C[0;34mАБ   л[6Cплм[s
[uп[1;5mм[0;1;34mлп[0;34mл[5mм[1;37mм[0;1mп[34mмл[5;37mм[34mлмл[s
[u[0;34mпмл[5mл[13;1H[11C[0;33mпп[5Cммл[1;5;34;43mА[40m[s
[u[0;1;34;43mА[5mА[0;1;34;43mАА[0;33mлВБп[8C[1;34;44mВ[5mА[40m[s
[u[0;34mАА [1;44mА В[1C[0;34mААБ мп[8Cм [1mп[5mм[0;1;34mм[0;34m[s
[uп [1;37mмлмлп[5mм[34mп[0;1;34mл[0;34mмп [1;5mў[14;1H[15C[s
[u[0;33mмлллл[1;34;43mАА[0;33mлл[1;34;43mАА[0;33mлВ[10C[34mмА  [s
[u[1;44mАВ [1C[0;34mАлА  л[7C[5mпм[0;34mлл[1mм  [5;37mп[0;1mм [s
[u[5mў[0;1mп лп [34mм  [0;34mп[15;1H[8C[33mАБпммлллллппп  лл[s
[u[1;5;34;43mА[0;33mВБ[9C[34mА[1;44mВ[4C[5mБА[0;34mАА лБ пм[7Cп[s
[uм  [1;37mм [5mм[0;1mмп[0;34mм[33mВ [34mмм[1mп[0;34mммп[16;1H[s
[u[20C[33mмл м[1;34;43mА[5mА[0;33mлБ[9C[1;34;44mВ[0;34mА   [s
[u[1;44mА[5mБ[0;1;34;44mВ[0;34mА   [1;44mА[0;34mББлм[8Cплм[1;37m[s
[uп[5mп [0;34mп [33mВА  [34mпп[17;1H[13C[33mлллпппллмл[s
[u[1;5;34;43mАА[0;33mллп[8C[1;5;34;44mА[0;34mА[5C[44m [1;5m[40m[s
[u[44mБ[0;1;34;44mВА[3CА[0;34mВВп[12C[33mА  ВВВАА[18;1H[15Cммллл[s
[u[1;34;43mА[5mА[0;1;34;43mА[0;33mллп[7C[34mммАА[7C[44m [40m[s
[u[44m[1;5mБ[0;1;34;44mВВ[2CА[0;34mмАл[13C[33mАБВлБА[19;1H[34mА[s
[u[10C[33mпББВВлл[1;34;43mАА[0;33mлллп[8C[34mВВБ[6C[44m  [40m[s
[u[44m[1mВ[5mВ[0;1;34;44mВВ[2CА[0;34mмп пл[13C[33mАБлБ А[20;1H[s
[u[34mАБВ[10C[33mААБВлпп[7C[34mммммАА[6C[44m  [1mВ[5mВ[40m[s
[u[0;1;34;44mВВБ[0;34mААлп   АБлм[10C[33mААлВ А[21;1H[34msњАВм[s
[u[19CммАБА[8C[44m  [1mБ[5mА[0;1;34;44mАБВ[1C[0;34mммп  ААБВВмл[s
[u[11C[33mААВБА[22;1H[34mњc  АВВмм[10CммААББ[17Cппп  мммлпп п
[23;1H[1;37;40m
@pauseon
        @do readspecial `s01 yn
        @show
`r0`c`$
        Hello fine traveller!  I have visited all parts of this isle and
        am alive to speak of it!

        Is there anything I can tell you about ?

        @do write
`x`x`x`x`x`x`x`x
        @do `v01 is 1
        @choice
`0The Bandersnatch
`0The Banshees
`0Hot Burning Ash
`0Moria Caverns
`0Mimsic Chasm
`0Fresh Garlic
`0The `%Holy Book
`0The `%Holy Flail
`0Mandrake root
`0The Medusa
`0Piper Tunes
`0The Vampires
`0The Vorpal Blade
`0Wolf's Bane
        @if response is 1 then do
        @begin
              @show
              `c
        `0The Bandersnatch?

        `2This is a tough monster in a bad neighbourhood!
        The `$Vorpal Blade `2sure helps when you have to fight it,
        and you will likely see it on your way to fight
        the `4Demons`2 at the volcano, just south of there.

              @key nodisplay
        @end
        @if response is 2 then do
        @begin
              @show
              `c
        `0The Banshees?

        `2To hear them is to die.  Not much more to tell you.

        If you have earmuffs, as smart travellers do, you never
        will hear them. Travel north of here and you may find them,
        the `0Banshees`2 that is. A little travel humour there. Heh.


              @key nodisplay
        @end
        @if response is 3 then do
        @begin
              @show
              `c
        `0Hot Burning Ash?

        `2Stay out of it. Haw! It burns.

        If you are having troubles with it near the volcano,
        see if you can get some `%burn herb `2from the farmers.

        They don't sell it much but you may find one willing
        to trade for it.  Mostly, they need help and you can't
        get hired help around here. A youngster of either sex
        would be what they might trade for, if you find one
        in need.

        Why, that reminds me, the farmer just north of here
        was looking for some help just yesterday, I think it was!

        Or was it last year and the other farmer...no matter,
        just poke around and see for yourself.

              @key nodisplay
        @end
        @if response is 4 then do
        @begin
              @show
              `c
        `0Moria Caverns?

        `2Deep subject.  Haw!  I kill me!

        The caves run through the mountains just north of here.
        You need special equipment to pass safely.

        Some kind of light, a glowworm or maybe a `%Shining Orb`2
        would be good, and you need a helmet lest the rocks split
        your head open!

        No helmets for sale at the gift shop, try Port Town,
        if you know where that is?

              @key nodisplay
        @end
        @if response is 5 then do
        @begin
              @show
              `c
        `0Mimsic Chasm?

        `2It's just a ditch.  It does keep the `%Medusa `2from
        wandering down to Ratville, and I bet the townspeople
        are glad!

        It keeps the rif-raf from getting eaten by the `#Trolls, `2too!

        The `#Trolls `2stay north of the chasm, the smart folks stay
        south, nice and safe, sorta`.

              @key nodisplay
        @end
        @if response is 6 then do
        @begin
              @show
              `c
        `0Fresh Garlic?

        `2Some people think it keeps `$vampires `2away.

        It might, It can't hurt to buy some from the farmers

        While you are at it, get Wolf's Bane and cloves, too.
        You can cook with some, if nothing else!

              @key nodisplay
        @end
        @if response is 7 then do
        @begin
              @show
              `c
        `0The `%Holy Book?

        `2I have heard of that, the gift shop in town
        sometimes has a copy.  I hear that you need it
        to use the `%Holy Flail.`2

        'Course, you hear a lot of things, some even true!

        Haw haw!

              @key nodisplay
        @end
        @if response is 8 then do
        @begin
              @show
              `c
        `0The `%Holy Flail?

        `2Ah, good thinking `&lad!

        You'll be needing that to take on the `4Pit Fiend`2
        that lives inside the volcano.  Lucky for us he never
        ever comes out or there would be nobody left on this isle.

        You aren't ready for that, nobody is.
        Forget that I told you anything about the `%Flail!

              @key nodisplay
        @end
        @if response is 9 then do
        @begin
              @show
              `c
        `0Mandrake root?

        `2I love the way it squeals when picked fresh!  Haw!

        It is usefull in some medicines, Dr. Fell will
        trade you for it.

        What was it he offered me?  Oh yes, `%armour polish.`2
        Just the thing to make your shield like a mirror!

              @key nodisplay
        @end
        @if response is 10 then do
        @begin
              @show
              `c
        `0The Medusa?

        `2Whew, that one kills with a glance.

        She has her own island and never leaves it.
        The island is off the northwest corner of
        Mimsic, you can avoid her, but it may involve
        a long walk. Smart idea, actually.

        You could face her using a mirror, or anything
        like that, to stone her before she gets you!

              @key nodisplay
        @end
        @if response is 11 then do
        @begin
              @show
              `c
        `0Piper Tunes?

        `2The `0piper `2does teach a few people his tunes
        and the gift shop sometimes sells pipes for playing.

        I remember chasing around piper field to catch him
        as he marched, it took some time to corner him
        but it was worth it.  I learned all I could from
        him.  Music can inspire, don't you think?

              @key nodisplay
        @end
        @if response is 12 then do
        @begin
              @show
              `c
        `0The Vampires?

        `2A bloody subject that!

        They are deadly, though there are worse things around
        and about.  Best thing is to carry a `%Shining Orb`2

        They hate the light and should stay away from it.


              @key nodisplay
        @end
        @if response is 13 then do
        @begin
              @show
              `c
        `0The Vorpal Blade?

        `2A good weapon against certain monsters, I heard it was
        lost in the caverns.  If you find it, keep it.

        It is good against the `%Jabberwok`2 and the `%Bandersnatch.

              @key nodisplay
        @end
        @if response is 14 then do
        @begin
              @show
              `c
        `0Wolf's Bane?

        `2You can pick this herb yourself or buy it
        from farmers in the field, remember, it must
        be fresh to keep the wolves away!

              @key nodisplay
        @end

        @drawmap
        @update
        @closescript
@end
@do saybar
`$You have already asked for a hint today, come back another day.
@closescript
;-----------------------------------------------------------
@#DarkNBard
@busy
@do moveback
@show
`r0`c
`0        You see before you a Bard, he turns to you and says:


`2       "This is a dismal place.  Ashes from the volcano to the
        west obscure the sun and all is permanent shadow here.
        The trees grow slowly and animals are hungry.  This is
        not a great place to visit without a `$Shining Orb`2 to
        light the way and hold back the night."

       "North of here is nicer, in a light sort of way. The Dark Bard,
        over a ways west of me in the forest, can give you lots of
        hints, he has travelled far and wide!"


@key nodisplay
@drawmap
@update

;-----------------------------------------------------------
@#DarkSBard
@do moveback
@busy
@show
`r0`c
`0        You see before you a Bard, he turns to you and says:


`2       "This is a dismal place.  Ashes from the volcano to the
        west obscure the sun and all is permanent shadow here.
        The trees grow slowly and animals are hungry.  This is
        not a great place to visit without a `$Shining Orb`2 to
        light the way and hold back the night."

       "I'd suggest some fresh `%Wolf's Bane `2too, but you must
        know about that, seasoned traveller that you are!"

@key nodisplay
@drawmap
@update

;-----------------------------------------------------------

                        ; Moria

@#MirrorTable
@do moveback
@busy
@dataload jw-isle2.mil &playernum `p24
@do `t70 is `p24
@if bitcheck `t70 4 1 then do
@begin
        @do saybar
`%You see the empty table where you found the `$Vorpal Blade.
        @closescript
@end
@bitset `t70 4 1
@do `p24 is `t70
@datasave jw-isle2.mil &playernum `p24
@show
`r0`c
        `0You have found the lost `%Vorpal Blade!`0

        It was lost years ago by Morlock the Greb.
        It will be handy to have if you meet a `#Jabberwok.`0

        It's not much good for other monsters though,
        except maybe a `#Bandersnatch.

@key nodisplay
@drawmap
@update
@closescript
;-----------------------------------------------------------
@#WestTP

@do saybar
Shazaam!   A moving performance!
@do map is 1313
@do x is 73
@do y is 11
@loadmap &map
@drawmap
@update

;-----------------------------------------------------------
@#EastTP
@do saybar
Shazaam!   A moving performance!
@do map is 1315
@do x is 4
@do y is 10
@loadmap &map
@drawmap
@update

;-----------------------------------------------------------
@#Med2TP
@do saybar
Shazaam!   A moving performance!
@do x is 74
@do y is 3
@update
;-----------------------------------------------------------
@#Med1TP
@do saybar
Shazaam!   A moving performance!
@do x is 30
@do y is 11
@update

;-----------------------------------------------------------
@#Skull

@if `i37 is 0 then do
@begin
        @do `p24 is `p03
        @do `p24 / 3
        @do `p02 - `p24
        @do statbar
        @do saybar
`$Ouch, falling rocks are killer!  I should get a `%helmet `$from somewhere!
        @if `p02 < 1 then do
        @begin
                @do enemy is falling`xrocks
                @run die in gametxt.ref
        @end
        @closescript
@end

@do saybar
`$Lucky you are wearing your `%helmet, `$that rock bounced off of it!
@closescript

;------------------------------------------------------
                        ;Compass .. Stone Circle

@#WestStone
@do saybar
You bump into the West Stone of the huge Compass.
;-----------------------------------------------------------
@#EastStone
@do saybar
You bump into the East Stone of the huge Compass.
;-----------------------------------------------------------
@#NorthStone
@do saybar
You bump into the North Stone of the huge Compass.
;-----------------------------------------------------------
@#SouthStone
@do saybar
You bump into the South Stone of the huge Compass.
;---------------------------------------------------------
@#MenhirMan

@do moveback
@BUSY
@do `t71 is 0

@label Menman

@SHOW
`r0
`c
`0`r1-=-You see a sunburned man sitting in the centre of a stone circle.`0-=-
`/
`/
`r0`2   He looks up at you with his piercing gaze.   `x`0"Yes...?"`2 he asks.
`/
`/

@dataload jw-isle3.mil &playernum `p24
@do `t70 is `p24

@DO `v01 is 1
@CHOICE
`$Leave.
-`t71 0 `2Who are you?
-`t71 1 `2What are these Stones?
-`t71 2 +`t70 0 `%Dr Fell sent me.
@IF RESPONSE IS 1 THEN DO
@begin
  @DRAWMAP
  @UPDATE
  @closescript
@end
@IF RESPONSE IS 2 THEN DO
@begin
  @bitset `t71 0 1
  @Show
`c
`2  Why ... I am `%Aragorn!
`/
`/
`#  Do you mean to say that you didn't recognize me ?
`/
`2  I have been gone from Greentree for far too long, I fear.
  Perhaps, I should go back and visit old friends.
`!  Do you know Turgon?  `2I must go and see him soon!
`/
`/
  @key
  @do goto menman
@end
@IF RESPONSE IS 3 THEN DO
@begin
  @bitset `t71 1 1
  @Show
`c
`/
`/
    These stones are ancient.  They were set up as a compass
    by an ancient sea-faring race of spiders. Few of them remain.
    Few of the stones, very few of the spiders. `%Have you met any?
`/
`/
  @key
  @do goto menman
@end
@IF RESPONSE IS 4 THEN DO
@begin
  @bitset `t71 2 1
  @Show
`c
`0  Ah...Doctor Fell sent you to learn about mandrake and other plants.
  Very well, I shall help you, he is an old friend.
`/
  `%Mandrake `0grows in a forest north and west of here, it is easy
  to find and pick. There are farmers who grow `%garlic, cotton`0 and
  `%wolfsbane.`0  These are of great value to wanderers of the wild
  lands to the north.  You better find or buy those that you can!
`/
`/
  @key

  @dataload jw-isle3.mil &playernum `p24
  @do `t70 is `p24
  @bitset `t70 1 1
  @do `p24 is `t70
  @datasave jw-isle3.mil &playernum `p24
  @do goto menman
@end

;---------------------------------------------------------
@#HealerHut
@do moveback
@busy

@pauseoff
@show
[?7h[40m[2J[37C[0;1;30mл  [0;31mГ[1;33;41m[0;31mГ[12C[34mм[5C[s
[u[1;30mл [0;33mмпн[6Cло[1mн[2;1H[37C[30mл  [0;31mГлГ[10C[34mмлл[s
[uлм   [1;30mл  [43m [7C[0;33mоо[1mн[3;1H[37C[30mл  [0;31mГлГ[8C[s
[u[34mмлллллллм [1;30mл  [0;31;43mп[40mмў[5C[33mоо[1mн[4;1H[37C[s
[u[30mл  [0;31mГ[1;33;41mї[0;31mГ[7C[34mмллпппллллм[1;30mл [0;33mо[s
[u[43m [40mм[6Cло[1mн[5;1H[37C[30mлппппппппппп[0;34mолп[33mм[s
[u[1;37mпм  м[44mм[40mп[0;34mлн[1;30mпппппппппппппппппп[6;1H[8C[s
[u[37mYes ?[24C[30mл[11C[37mм[0;34mп[33mм  пмп  м[34mп[1;37mм[s
[u[10C[0;30;42mГ[32;47mл[30;42mГ[7;1H[37C[1;40mл[10C[37mмп м[s
[u[0;33mплпнплп[1;37mм пм[9C[0;30;42mГ[37m[30mГ[8;1H[37C[40m[s
[u[1;40mл[9C[37mмппмплмпппмлп ммл[8C[0;30;42mГ[1m[0;30;42mГ[40m
[9;1H[37C[1mл[9C[37mм лпм плллмп мплм[8C[0;30;42mГ[32;47mл[40m[s
[u[30;42mГ[10;1H[37C[1;40mл[8C[0;34mммм[1;37mпм[0;34mмпм  ммпл [s
[u[1;37mп[0;34mммм[7C[30;42mГ[32;47mл[30;42mГ[11;1H[37C[40m[s
[u[1;40mл[5C[0;34mмлллппллллл ллмлл ллл ппм    [30;42mГ[1mї[40m[s
[u[0;30;42mГ[12;1H[37C[1;40mлпппп [0;34mлпмл  пллмлм ллллп ллллл м[s
[u[1;30mппппппппппп[13;1H[37Cл    [0;34mлллп    ллллл ллллл   ллплл
[14;1H[37C[1;30mл    [0;34mллллм    лллл ллл ллпм лплл[5C[35mГл[s
[u[1;36;45m[0;35mлГ[15;1H[37C[1;30mл   [0;34mп мммм  [1;33m\  [s
[u[0;34mлл л[1;33m|[0;34mплллп [1;33m/[0;34mпммммм    [35mГл[s
[u[1;36;45mш[0;35mлГ[16;1H[37C[1;30mл  [0;34mмпп[33mм м [34mп   [s
[u[1;33m\ [0;34mп  [1;33m| [0;34mпм [1;33m/ [0;34mмп [33mм м [34mп[s
[uм  [35mГл[1;36;45m[0;35mлГ[17;1H[37C[1;30mл [0;34mп  [33mмўп п [s
[u[1mммммммм   мммммм [0;33mп пўм [34mм  [35mГл[45m [40mлГs[18;1H[s
[u[37C[1;30mл  [0;34mпмм  [33mм[1;43mппппп[0;33mммм [1;43mппп[40m[s
[u[1C[0;33mммм[1;43mпппп[0;33mм[7C[35mГл[1;36;45mї[0;35mлГc[19;1H[s
[u[27C[1;30mппппппппппппппппппппппппппппппппппппппппппппппппппппп[20;1H[s
[u[37m[1;37;40m
`7                                            (Ansi by Sandy Chidester)
@pauseon
@key nodisplay

@show
`r0
`c
                           `r1`%Merlin's Potion Shoppe`r0                             `r0


@buymanager
   2
  40
  55
  66

@drawmap
@update
@closescript
;---------------------------------------------------------
@#FishBard
@do moveback
@do saybar
`$It is a beautiful day for fishing!`0
;---------------------------------------------------------
@#Fish
@routine fishdock in porttown.ref
;---------------------------------------------------------


               ;Marsh
@#Swamprat
@busy
@pauseoff
@show
[?7h[40m[2J[16C[0;33mА[7C[37mл   пплллВВБА ВВп ммллВБмм[5CмпплллВВБ[s
[uБА  БВВлм  [33mВ[2;1H[8C[32mАБВ[33mА [32mАА [33mБ  [32mАБВ  [s
[u[37mВл[6CллВБААБ   ВБВпВБААВВВБлмм   ВББВБАА ВБАБВБ[33mБА[32mммм
[3;1H[7Cммм  [33mА  В[8C[37mБВ[8CВБАА   лВБААБВБВББАБВВББА Б ББВББА Б[s
[u[32mппВБА   мп[4;1H ммВБАА[33mАБ  [32mмВБААВБ[6C[37mААББ[10CА [s
[u[33mм  [37mА   А[7CБ    [33mм  [37mААБ    А[32mм  [33mВ[32mААБВ
[5;1HАБ   [33mААБ БА   ББ[32mпппм[5C[37mААБААБВ[5CААА[33mплм   ммллл[s
[uллмм   млп[37mААА   [32mААБВББ [33mБ[32mА [33mА [32mп[6;1H    [s
[u[33mАА  ББВ   А[13C[37mАА  АБВВ[5C[33mо лмппплллллпппмл н  [37mА [s
[u[32mппп   п   [33mВ[32mммлпп[7;1H[1;30mВ  [0;33mАА ААБ[32mАВ   [s
[u[33mА [32mппБВмм[8C[37mАА АБАБВВ  [33mл  ом [37mњ [33mллл [37mњ [s
[u[33mмн  л  ммм[8C[32mА  В [33mАБ[8;1H[1;30mВВВ   [0;32mБАА ппБВмм[s
[u    пппп [37mВ[10CААВВ  [33mп лллмллл лмллл п лллллллл   [32mААББВ[s
[u[33mАБ[32mВБ[9;1H[1;30mВББВВлл [0;32mААппм  [33mА  [32mм  [37mАА[s
[uААБВВ[7CАА   ВВ   [33mпллнплполлп млллллллллллл[6C[32mАА[33mА
[10;1H[1;30mББАБВВллл[5C[0;33mАА[32mппВБА   [37mААББВ[8CАА   ВВ   [s
[u[33mп ппп пммллллл лллллллллл  БА  [32mБВ[11;1H[1;30mАААБВВВлллл  [s
[u[0;33mБ[5C[32mп   [37mАА  АААБВВ[5CА[7C[33mл пмммп лллллл ллл ллл[s
[uллллл   [32mппВВ[12;1H   [1;30mпппммллм плВБл[8C[0mАААА ААААА    [s
[u[33mмллм лллп    мллппллл лллм  ллллллл   АБ[32mм[13;1H[1;30mллллллл[s
[uллВБА[5Cппл[9C[0mАААА ААА [33mллпмпп[9Cпп пм пм ллллм плллллл [32m[s
[uммпп[14;1H[1;30mллллллллллллллВБА   ллл[8C[0mАА[6C[33mпм п[10Cмпп[s
[uплллм  ллллм ллллллл [32mББВ[15;1H[1;30mлллллллллллллллВББА  ллл[9C[s
[u[0mА[20C[33mм п  пллллллп ммллллллл  [32mА[16;1H[1;30mВВББлллллллл[s
[uлллллВВБА  лллллппппмммммм[17C[0;33mммлллммммм  мллллллллл  [1;30mм
[17;1HлллББААлллллллллллВББА[5CллллллАБВллВБА АБВВллллллп [0;33mллллллпл[s
[uллллллллллллллл [1;30mпп[18;1HллллллАААББВВБААппппппппппп  [0;34mмммм[s
[uмммммммммммммммммммп   [33mплллл   лллллллллллл   [1;30ms[19;1Hлллллл[s
[uллллВБАААААА [0;34mмлллллллллллллллллллпппппп[1;30mммммААБВлппп [s
[u[0;33mпллллмм плллллллп    [1;30mc[20;1HллллВБААБВлммммммммммммм  [s
[u[0;34mппппппппппп  [1;30mААБВллмм [0;33mм м ммллллллллллп[1;30mАБА [s
[u[0;33mпппп [1;30mВББАм[21;1H[22;1H[42m             [0;30;42mY[40m[s
[u[42mech!    What in the world is [1;37mTHAT [0;30;42mthing?     [40m[s
[u[42m                     [23;1H[1;37;40m
@key nodisplay

@dataload jw-isle2.mil &playernum `p24
@do `t70 is `p24
@if bitcheck `t70 1 0 then do
@begin
@fight
;name
Slimey Kobold
;string said when you see him
`#Oh oh .... this is `%Gross!                           џ
;power move kill string
A mighty swat!
;sex - 1 is male, 2 is female, 3 is it
1
;weapon and strength for the weapon, up to 5
hugs you|1000
hurls swampwater at you|1200
swipes at you with a dirty fist|800
NONE|NONE
NONE|NONE
;defense
1000
;gold reward
1500
;experience
750
;hit points
2000
;if win: ref file|name or NONE
NONE|NONE
;if lose: ref file|name or NONE
GAMETXT.REF|DIE
;if runs: ref file|name or NONE
NONE|NONE
@end

@drawmap
@update
@closescript

;--------------------------------------------------------

@#SwampPrize
@do moveback
@busy
@dataload jw-isleg.mil &playernum `p24
@do `t70 is `p24
@if bitcheck `t70 7 0 then do
@begin
        @show
`r0`c
     `0You see a `%Holy Flail`0 inside a hollow tree.  You dare not pick
     it up without more knowledge. You wonder whether the `%Holy Book`0
     that you saw in the town's gift shop might not tell you which is
     the `#dangerous`0 end of the weapon, and where it should be used?
`/
`/
        @key nodisplay
        @drawmap
        @update
        @closescript
@end

@dataload jw-isle2.mil &playernum `p24
@do `t70 is `p24
@if bitcheck `t70 1 0 then do
@begin
  @if bitcheck `t70 3 1 then do
  @begin
        @bitset `t70 1 1
        @do `p24 is `t70
        @datasave jw-isle2.mil &playernum `p24

        @do move 15 23
        @do write
`r0`@Wow!`0 You pick up a `%Holy Flail!
        @key
        @clearblock 23 24
        @closescript
  @end
@end

@if bitcheck `t70 3 0 then do
@begin
        @run madmage in jw-isle.ref
@end

@do move 5 23
@do write
`r0`0There is nothing here but a tree with the name "Shiv" carved in it.
@key nodisplay
@clearblock 23 24
@closescript

;-------------------------------------------------------
@#TalkedShiv
@dataload jw-isle2.mil &playernum `p24
@do `t70 is `p24
@if bitcheck `t70 3 0 then do
@begin
  @do moveback
                        ;If not seen shiv, else pass through.
  @busy
  @do saybar
Have you spoken to Shiv in the town jail?
  @routine killkeypress
@end

;--------------------------------------------------------

@#SafeBridge
@do quebar
`%I'd hate to think about hero eating `#TROLLS`% under this bridge!


;--------------------------------------------------------
@#SwampFever

@do moveback
@offmap

@label witch

@show
`r0`c  `r1  Swamp Remedies & Cures  `r0

`2  The witch-doctor looks you over for wounds and fever.

@dataload jw-isle1.mil &playernum `p24
@do `t70 is `p24

@if bitcheck `t70 5 1 then do
@begin
        @do `p02 is 1
        @bitset `t70 5 0
        @do `p24 is `t70
        @datasave jw-isle1.mil &playernum `p24

        @show
`/
`0The Shaman solemly announces:
`%  "You have swamp fever, it must be cured before your enter
   this dwelling, lest you spread the disease."
`/
  "Whether you wish it or not, I must proceed."
`/
`/
  `2The Shaman throws magic powder in your face and you lose
  all but one hitpoint. He has cured your swamp fever. (Whew!)

        @key nodisplay
        @do goto witch
@end

@run hospital in jw-isle.ref

@closescript
;------------------------------------------------

@label killkeypress
@do moveback
@do move 15 23
@do write
`r0`@Ouch!`0 Did you intend to bump into `@THAT ? `%(Yn)
@do readspecial `s01 YN
@clearblock 23 24

@CloseScript
